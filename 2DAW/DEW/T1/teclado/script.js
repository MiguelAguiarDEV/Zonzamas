const teclas = {
    
    0 : [{
            "nombre": "Âº",
            "normal": "Âº",
            "shift": "Âª",
            "altgr": "\\"
        },
        {
            "nombre": "1",
            "normal": "1",
            "shift": "!",
            "altgr": "|"
        },
        {
            "nombre": "2",
            "normal": "2",
            "shift": '"',
            "altgr": "@"
        },
        {
            "nombre": "3",
            "normal": "3",
            "shift": "'",
            "altgr": "#"
        },
        {
            "nombre": "4",
            "normal": "4",
            "shift": "$",
            "altgr": null
        },
        {
            "nombre": "5",
            "normal": "5",
            "shift": "%",
            "altgr": null
        },
        {
            "nombre": "6",
            "normal": "6",
            "shift": "&",
            "altgr": "Â¬"
        },
        {
            "nombre": "7",
            "normal": "7",
            "shift": "/",
            "altgr": null
        },
        {
            "nombre": "8",
            "normal": "8",
            "shift": "(",
            "altgr": "{"
        },
        {
            "nombre": "9",
            "normal": "9",
            "shift": ")",
            "altgr": "}"
        },
        {
            "nombre": "0",
            "normal": "0",
            "shift": "=",
            "altgr": null
        },
        {
            "nombre": "'",
            "normal": "'",
            "shift": "?",
            "altgr": null
        },
        {
            "nombre": "Â¡",
            "normal": "Â¡",
            "shift": "Â¿",
            "altgr": null
        },
        {
            "nombre": "Retroceso",
            "normal": "Retroceso",
            "shift": "Retroceso",
            "altgr": "Retroceso"
        }],
    1 : [{
            "nombre": "Tab",
            "normal": "Tab",
            "shift": null,
            "altgr": null
        },
        {
            "nombre": "Q",
            "normal": "q",
            "shift": "Q",
            "altgr": null
        },
        {
            "nombre": "W",
            "normal": "w",
            "shift": "W",
            "altgr": null
        },
        {
            "nombre": "E",
            "normal": "e",
            "shift": "E",
            "altgr": "â‚¬"
        },
        {
            "nombre": "R",
            "normal": "r",
            "shift": "R",
            "altgr": null
        },
        {
            "nombre": "T",
            "normal": "t",
            "shift": "T",
            "altgr": null
        },
        {
            "nombre": "Y",
            "normal": "y",
            "shift": "Y",
            "altgr": null
        },
        {
            "nombre": "U",
            "normal": "u",
            "shift": "U",
            "altgr": null
        },
        {
            "nombre": "I",
            "normal": "i",
            "shift": "I",
            "altgr": null
        },
        {
            "nombre": "O",
            "normal": "o",
            "shift": "O",
            "altgr": null
        },
        {
            "nombre": "P",
            "normal": "p",
            "shift": "P",
            "altgr": null
        },
        {
            "nombre": "`",
            "normal": "`",
            "shift": "^",
            "altgr": "["
        },
        {
            "nombre": "+",
            "normal": "+",
            "shift": "*",
            "altgr": "]"
        },
        {
            "nombre": "Enter",
            "normal": "Enter",
            "shift": "Enter",
            "altgr": "Enter"
        }],
    2 : [{
            "nombre": "BloqMayus",
            "normal": "BloqMayÃºs",
            "shift": "BloqMayÃºs",
            "altgr": "BloqMayÃºs"
        },
        {
            "nombre": "A",
            "normal": "a",
            "shift": "A",
            "altgr": null
        },
        {
            "nombre": "S",
            "normal": "s",
            "shift": "S",
            "altgr": null
        },
        {
            "nombre": "D",
            "normal": "d",
            "shift": "D",
            "altgr": null
        },
        {
            "nombre": "F",
            "normal": "f",
            "shift": "F",
            "altgr": null
        },
        {
            "nombre": "G",
            "normal": "g",
            "shift": "G",
            "altgr": null
        },
        {
            "nombre": "H",
            "normal": "h",
            "shift": "H",
            "altgr": null
        },
        {
            "nombre": "J",
            "normal": "j",
            "shift": "J",
            "altgr": null
        },
        {
            "nombre": "K",
            "normal": "k",
            "shift": "K",
            "altgr": null
        },
        {
            "nombre": "L",
            "normal": "l",
            "shift": "L",
            "altgr": null
        },
        {
            "nombre": "Ã±",
            "normal": "Ã±",
            "shift": "Ã‘",
            "altgr": null
        },
        {
            "nombre": "Â´",
            "normal": "Â´",
            "shift": "Â¨",
            "altgr": "{"
        },
        {
            "nombre": "Ã§",
            "normal": "Ã§",
            "shift": "Ã‡",
            "altgr": "}"
        },
    ],
    3 : [{
            "nombre": "Shift",
            "normal": "Shift",
            "shift": "Shift",
            "altgr": "Shift"
        },
        {
            "nombre": "<",
            "normal": "<",
            "shift": ">",
            "altgr": null
        },
        {
            "nombre": "Z",
            "normal": "z",
            "shift": "Z",
            "altgr": null
        },
        {
            "nombre": "X",
            "normal": "x",
            "shift": "X",
            "altgr": null
        },
        {
            "nombre": "C",
            "normal": "c",
            "shift": "C",
            "altgr": null
        },
        {
            "nombre": "V",
            "normal": "v",
            "shift": "V",
            "altgr": null
        },
        {
            "nombre": "B",
            "normal": "b",
            "shift": "B",
            "altgr": null
        },
        {
            "nombre": "N",
            "normal": "n",
            "shift": "N",
            "altgr": null
        },
        {
            "nombre": "M",
            "normal": "m",
            "shift": "M",
            "altgr": null
        },
        {
            "nombre": ",",
            "normal": ",",
            "shift": ";",
            "altgr": null
        },
        {
            "nombre": ".",
            "normal": ".",
            "shift": ":",
            "altgr": null
        },
        {
            "nombre": "-",
            "normal": "-",
            "shift": "_",
            "altgr": null
        },
        {
            "nombre": "Shift",
            "normal": "Shift",
            "shift": "Shift",
            "altgr": "Shift"
        }
    ],
    4 : [
        {
            "nombre": "Espacio",
            "normal": "Espacio",
            "shift": "Espacio",
            "altgr": "Espacio"
        },
        {
            "nombre": "AltGr",
            "normal": "AltGr",
            "shift": "AltGr",
            "altgr": "AltGr"
        },
        {
            "nombre": "ðŸ ”",
            "normal": "ðŸ ”",
            "shift": "ðŸ ”",
            "altgr": "ðŸ ”"
        },
        {
            "nombre": "ðŸ –",
            "normal": "ðŸ –",
            "shift": "ðŸ –",
            "altgr": "ðŸ –"
        }
    ]
};



const cursor = document.getElementById("cursor");
const tecladoHTML = document.getElementById("teclado");
const texto = document.getElementById("texto");
bloqMayusActivo = false;
function crearTecladoHTML (evento){
    tecladoHTML.innerHTML = "";
    if (evento === 'normal' || evento === 'shift' || evento === 'altgr') {
        Object.keys(teclas).forEach((tecla,i) => {
            const fila = document.createElement("div");
            fila.classList = ("fila fila" + i);

            teclas[i].forEach((tecla) => {
                let teclaHTML = document.createElement("div");
                teclaHTML.innerHTML = tecla[evento];
                teclaHTML.className = "tecla "+tecla["nombre"];
                
                console.log(tecla);
                fila.appendChild(teclaHTML);
            });

            tecladoHTML.appendChild(fila);
        });
    

        console.log('eventoumento vÃ¡lido: ' + evento);
    } else {
        console.log('eventoumento no vÃ¡lido: ' + evento);
    
    }
}
crearTecladoHTML('normal');


function anadirEvento(){
    tecladoHTML.addEventListener('click', (event) => {
        if(event.target.classList[0] === 'tecla'){
            switch (event.target.innerHTML) {
            case 'Shift':
                tipoTeclado = 'shift';
                crearTecladoHTML(tipoTeclado);
                break;
            case 'AltGr':
                tipoTeclado = 'altgr';
                crearTecladoHTML(tipoTeclado);
                break;  
            case 'BloqMayÃºs':
                if (bloqMayusActivo) {
                    bloqMayusActivo = false;
                    tipoTeclado = 'normal';
                } else {
                    bloqMayusActivo = true;
                    tipoTeclado = 'shift';
                }
                crearTecladoHTML(tipoTeclado);

                break;
            case 'ðŸ –' || 'ðŸ ”':
                console.log(texto.innerHTML.indexOf(cursor.outerHTML));
                break;
                case 'Retroceso':
                texto.innerHTML = texto.innerHTML.slice(0, -1);
                break;
            case 'Enter':
                texto.innerHTML += "<br>";
                break;
            default:
                texto.removeChild(cursor);
                if (event.target.innerHTML === "Espacio" || event.target.innerHTML === "Tab") {
                    texto.innerHTML += event.target.innerHTML == "Espacio" ? "&ensp;" : "&ensp;&ensp;&ensp;&ensp;" ;
                }else{
                    texto.innerHTML += event.target.innerHTML;
                }
                if (bloqMayusActivo) {
                    tipoTeclado = 'shift';
                }else{
                    tipoTeclado = 'normal';
                }
                texto.appendChild(cursor);
                crearTecladoHTML(tipoTeclado);
                break;
        }}
    })
};
anadirEvento();

document.addEventListener('keydown', function(event) {
        
});


